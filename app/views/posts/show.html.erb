<p>
  <strong>Message:</strong>
  <%=simple_format(@post.message) %>
</p>

<article id='likes'>
  <span id='likes-count'>
    Likes: <span id='likes-number'><%= @post.likes.count %></span>
  </span>
  <span id='likes-button'>
    <% user_like = @post.likes.find { |like| like.user_id == current_user.id } %>

    <% if user_like %>
      <%= form_with model: [@post, user_like], local: true, method: :delete, html: { id: :unlike_form } do |form| %>
        <%= form.hidden_field :user_id, value: current_user.id %>
        <%= form.submit 'Unlike' %>
      <% end %>
    <% else %>
      <%= form_with model: [@post, @post.likes.build], local: true, html: { id: :like_form } do |form| %>
        <%= form.hidden_field :user_id, value: current_user.id %>
        <%= form.submit 'Like' %>
      <% end %>
    <% end %>
  </span>
</article>
<br>

<br>
<%= link_to 'Comment', new_post_comment_path(@post) %>
<p>
  <% @post.comments.each do |comment| %>
  <span> <%= User.find(comment.user_id).name %> commented:
  <%= comment.body %> </span>
  <br>
  <% end %>
</p>

<% if @post.user_id == current_user.id %>
<%= link_to 'Edit', edit_post_path(@post) %> |
<%= link_to 'Destroy', post_path(@post),
              method: :delete,
              data: { confirm: 'Are you sure?' } %> |
<% end %>
<%= link_to 'Back', posts_path %>
